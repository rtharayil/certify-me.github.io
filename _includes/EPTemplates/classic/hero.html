<section id="hero-5" class="bg--scroll hero-section">
    <div class="container">	
        <div class="row d-flex align-items-center">

            <!-- HERO TEXT -->
            <div class="col-md-6">
                <div class="hero-5-txt wow fadeInRight">

                    <!-- Title -->
                    <h4 class="s-38 w-700">Hi, I am</h4>
                    <h2 class="s-58 w-700">Riya Sharma</h2>

                    <div class="education-box ">
                        <strong>Bachelor of Engineering (Computer Science)</strong> 
                    </div>
                    <br>

                    <p class="color--grey" style="font-size: 1.0625rem;">
                        I'm a UI/UX Developer based in Delhi, India. I strive to build immersive and beautiful web applications through carefully crafted code and user-centric design.
                    </p>

                    <!-- Buttons -->
                    <div class="d-flex flex-column flex-md-row gap-3 mb-4 justify-content-center justify-content-md-start align-items-center text-center text-md-start">
                        
                        <!-- Download CV -->
                        <a href="/files/1.pdf" download="Riya-Sharma-CV.pdf" class="btn r-04 btn--theme hover--theme">
                            Download CV
                        </a>

                        <!-- New Tell Me About Myself Button -->
                        <button id="openVideoBtn"
                                class="btn r-04 btn--theme hover--theme"
                                style="background:#000000; color:#fff;"
                                aria-haspopup="dialog" aria-controls="videoPopup">
                            Watch Intro Video
                        </button>
                    </div>

                    <!-- Small Info Boxes -->
                    <div class="d-flex gap-3">

                        <!-- Box 1 -->
                        <div class="p-3 text-center rounded"
                             style="background:#ffffff; border:1px solid #e5e7eb; width:120px; box-shadow:0 3px 10px rgba(0,0,0,0.1);">
                            <h4 class="w-700 m-0" style="font-size:24px; color:#282B75;">6</h4>
                            <p class="m-0" style="font-size:14px; color:#444;">Projects</p>
                        </div>

                        <!-- Box 2 -->
                        <div class="p-3 text-center rounded"
                             style="background:#ffffff; border:1px solid #e5e7eb; width:120px; box-shadow:0 3px 10px rgba(0,0,0,0.1);">
                            <h4 class="w-700 m-0" style="font-size:24px; color:#282B75;">9</h4>
                            <p class="m-0" style="font-size:14px; color:#444;">Endoresments</p>
                        </div>

                        <!-- Box 3 -->
                        <div class="p-3 text-center rounded"
                             style="background:#ffffff; border:1px solid #e5e7eb; width:120px; box-shadow:0 3px 10px rgba(0,0,0,0.1);">
                            <h4 class="w-700 m-0" style="font-size:24px; color:#282B75;">4</h4>
                            <p class="m-0" style="font-size:14px; color:#444;">Achivements</p>
                        </div>
                    </div>

                    <!-- Skills Pills -->
                    <div class="d-flex flex-wrap gap-2 mt-3">
                        <span style="background:#eef0ff; color:#282B75; padding:8px 16px; border-radius:30px; font-size:14px; border:1px solid #d6d8f5;">UI/UX Design</span>
                        <span style="background:#eef0ff; color:#282B75; padding:8px 16px; border-radius:30px; font-size:14px; border:1px solid #d6d8f5;">Figma</span>
                        <span style="background:#eef0ff; color:#282B75; padding:8px 16px; border-radius:30px; font-size:14px; border:1px solid #d6d8f5;">HTML/CSS</span>
                        <span style="background:#eef0ff; color:#282B75; padding:8px 16px; border-radius:30px; font-size:14px; border:1px solid #d6d8f5;">JavaScript</span>
                        <span style="background:#eef0ff; color:#282B75; padding:8px 16px; border-radius:30px; font-size:14px; border:1px solid #d6d8f5;">React</span>
                    </div>

                </div>
            </div>	
            <!-- END HERO TEXT -->


            <!-- HERO IMAGE -->
            <div class="col-md-6">	
                <div class="hero-5-img wow fadeInLeft">	
                    <img class="img-fluid" src="/images/eptemplate/Riya.png" alt="hero-image">					
                </div>
            </div>	

        </div>    
    </div>	   

    <!-- WAVE SHAPE BOTTOM -->	
    <div class="wave-shape-bottom">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 170">
            <path fill-opacity="1" d="M0,160L120,160C240,160,480,160,720,138.7C960,117,1200,75,1320,53.3L1440,32L1440,320L1320,320C1200,320,960,320,720,320C480,320,240,320,120,320L0,320Z"></path>
        </svg>
    </div>

</section>

<!-- VIDEO POPUP - COMPLETELY FIXED -->
<div id="videoPopup"
     role="dialog"
     aria-modal="true"
     aria-hidden="true"
     aria-labelledby="videoPopupTitle"
     style="position:fixed; 
            top:0; 
            left:0; 
            width:100vw; 
            height:100vh;
            background:rgba(0,0,0,0.95); 
            display:none; 
            justify-content:center;
            align-items:center; 
            z-index:999999; 
            padding:0; 
            margin:0;
            overflow:hidden;">

    <h2 id="videoPopupTitle" style="position:absolute; left:-9999px;">About Riya Sharma Video</h2>

    <!-- Close Button -->
    <button id="closeVideoBtn"
            type="button"
            aria-label="Close video popup"
            style="position:fixed; 
                   top:30px; 
                   right:30px;
                   background:#ffffff; 
                   border:none; 
                   padding:0;
                   font-size:24px; 
                   font-weight:bold; 
                   cursor:pointer; 
                   border-radius:50%; 
                   width:50px; 
                   height:50px;
                   z-index:9999999; 
                   box-shadow: 0 4px 15px rgba(0,0,0,0.5);
                   transition: all 0.3s ease; 
                   display:flex; 
                   align-items:center; 
                   justify-content:center;
                   color:#333;
                   line-height:1;
                   outline:none;">
        âœ–
    </button>

    <!-- Video Container -->
    <div id="videoContainer" 
         style="max-width:90vw; 
                width:1200px; 
                max-height:90vh; 
                display:flex; 
                justify-content:center; 
                align-items:center; 
                z-index:9999998; 
                position:relative;
                pointer-events:none;">
        
        <!-- Video Element -->
        <video id="aboutVideo"
               src="/images/eptemplate/intro-web.mp4"
               controls
               preload="metadata"
               playsinline
               style="width:100%; 
                      height:auto; 
                      max-height:90vh; 
                      border-radius:12px; 
                      background:#000; 
                      outline:none; 
                      box-shadow:0 20px 60px rgba(0,0,0,0.8);
                      pointer-events:auto;">
            Your browser doesn't support HTML5 video. Please use a modern browser.
        </video>
    </div>
</div>

<!-- CSS STYLES FOR POPUP -->
<style>
/* Ensure popup is above everything */
#videoPopup {
    -webkit-tap-highlight-color: transparent;
    touch-action: none;
}

/* Close button hover effect */
#closeVideoBtn:hover {
    background: #ff4444 !important;
    color: #ffffff !important;
    transform: scale(1.15) rotate(90deg);
}

#closeVideoBtn:active {
    transform: scale(0.95) rotate(90deg);
}

#closeVideoBtn:focus {
    outline: 3px solid #fff;
    outline-offset: 2px;
}

/* Prevent body scroll when popup is open */
body.video-popup-open {
    overflow: hidden !important;
    position: fixed !important;
    width: 100% !important;
    height: 100% !important;
}

/* Hide scrollbar completely when popup is open */
body.video-popup-open::-webkit-scrollbar {
    display: none;
}

/* Ensure video controls are accessible */
#aboutVideo::-webkit-media-controls-panel {
    z-index: 9999998;
}

/* Mobile responsiveness */
@media (max-width: 768px) {
    #closeVideoBtn {
        top: 15px;
        right: 15px;
        width: 40px;
        height: 40px;
        font-size: 20px;
    }
    
    #videoContainer {
        max-width: 95vw;
        max-height: 85vh;
    }
}
</style>

<!-- JAVASCRIPT FOR POPUP - FULLY FIXED -->
<script>
(function () {
    'use strict';
    
    let openBtn, videoPopup, aboutVideo, closeBtn, videoContainer;

    // Close the video popup
    function closeVideoPopup() {
        if (!videoPopup || !aboutVideo) return;
        
        console.log('Closing video popup');
        
        // Hide popup
        videoPopup.style.display = 'none';
        videoPopup.setAttribute('aria-hidden', 'true');

        // Re-enable body scrolling
        document.body.classList.remove('video-popup-open');
        document.documentElement.style.overflow = '';
        document.body.style.overflow = '';

        // Pause and reset video
        try {
            if (!aboutVideo.paused) {
                aboutVideo.pause();
            }
            aboutVideo.currentTime = 0;
        } catch (err) {
            console.warn('Error stopping video:', err);
        }

        // Return focus to open button
        if (openBtn) {
            setTimeout(() => {
                openBtn.focus();
            }, 100);
        }
    }

    // Open the video popup
    function openVideoPopup() {
        if (!videoPopup || !aboutVideo) return;
        
        console.log('Opening video popup');
        
        // Disable body scrolling
        document.body.classList.add('video-popup-open');
        document.documentElement.style.overflow = 'hidden';
        document.body.style.overflow = 'hidden';
        
        // Show popup
        videoPopup.style.display = 'flex';
        videoPopup.setAttribute('aria-hidden', 'false');

        // Try to play video
        setTimeout(() => {
            const playPromise = aboutVideo.play();
            if (playPromise !== undefined) {
                playPromise.then(() => {
                    console.log('Video playing');
                }).catch((err) => {
                    console.info('Autoplay prevented:', err);
                    aboutVideo.controls = true;
                });
            }
        }, 100);
        
        // Focus on close button
        setTimeout(() => {
            if (closeBtn) {
                closeBtn.focus();
            }
        }, 200);
    }

    // Initialize everything
    function init() {
        console.log('Initializing video popup');
        
        // Get elements
        openBtn = document.getElementById('openVideoBtn');
        videoPopup = document.getElementById('videoPopup');
        aboutVideo = document.getElementById('aboutVideo');
        closeBtn = document.getElementById('closeVideoBtn');
        videoContainer = document.getElementById('videoContainer');

        // Check if all elements exist
        if (!openBtn) {
            console.error('Open button not found');
            return;
        }
        if (!videoPopup) {
            console.error('Video popup not found');
            return;
        }
        if (!aboutVideo) {
            console.error('Video element not found');
            return;
        }
        if (!closeBtn) {
            console.error('Close button not found');
            return;
        }

        console.log('All elements found');

        // CLOSE BUTTON - Multiple event listeners for reliability
        closeBtn.onclick = function(e) {
            e.preventDefault();
            e.stopPropagation();
            e.stopImmediatePropagation();
            console.log('Close button clicked (onclick)');
            closeVideoPopup();
            return false;
        };

        closeBtn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            e.stopImmediatePropagation();
            console.log('Close button clicked (addEventListener)');
            closeVideoPopup();
        }, true);

        closeBtn.addEventListener('touchstart', function(e) {
            e.preventDefault();
            e.stopPropagation();
            console.log('Close button touched');
            closeVideoPopup();
        }, true);

        // OPEN BUTTON
        openBtn.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('Open button clicked');
            openVideoPopup();
        });

        // BACKDROP CLICK - Close when clicking outside video
        videoPopup.addEventListener('click', function(e) {
            console.log('Popup clicked, target:', e.target.id);
            if (e.target === videoPopup) {
                closeVideoPopup();
            }
        });

        // Prevent video clicks from closing popup
        if (videoContainer) {
            videoContainer.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        }

        aboutVideo.addEventListener('click', function(e) {
            e.stopPropagation();
        });

        // ESCAPE KEY
        document.addEventListener('keydown', function(e) {
            if ((e.key === 'Escape' || e.key === 'Esc') && 
                videoPopup.style.display === 'flex') {
                console.log('Escape key pressed');
                closeVideoPopup();
            }
        });

        // PAUSE VIDEO when page is hidden
        document.addEventListener('visibilitychange', function() {
            if (document.hidden && aboutVideo && !aboutVideo.paused) {
                try {
                    aboutVideo.pause();
                } catch (e) {
                    console.warn('Could not pause video:', e);
                }
            }
        });

        // PAUSE VIDEO when navigating away
        window.addEventListener('pagehide', function() {
            if (aboutVideo && !aboutVideo.paused) {
                try {
                    aboutVideo.pause();
                } catch (e) {
                    console.warn('Could not pause video:', e);
                }
            }
        });

        // Prevent video from ending and closing popup unexpectedly
        aboutVideo.addEventListener('ended', function() {
            console.log('Video ended');
            // Don't auto-close, let user close manually
        });

        console.log('Video popup initialized successfully');
    }

    // Wait for DOM
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        init();
    }

    // Also try to init after a short delay as backup
    setTimeout(init, 500);
})();
</script>